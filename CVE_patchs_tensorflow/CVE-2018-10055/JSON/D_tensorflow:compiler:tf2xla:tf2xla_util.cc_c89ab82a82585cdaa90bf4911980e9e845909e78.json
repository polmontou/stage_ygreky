"diff --git a/tensorflow/compiler/tf2xla/tf2xla_util.cc b/tensorflow/compiler/tf2xla/tf2xla_util.cc\nindex f428a194328..2fc77cc4bc5 100644\n--- a/tensorflow/compiler/tf2xla/tf2xla_util.cc\n+++ b/tensorflow/compiler/tf2xla/tf2xla_util.cc\n@@ -151,8 +151,15 @@ Status AddPlaceholdersForFeeds(\n       Status status;\n       Node* feed_node = g.AddNode(gd.node(0), &status);\n       TF_RETURN_IF_ERROR(status);\n-      info.data_type =\n-          BaseType(feed_node->output_type(info.feed->id().output_index()));\n+\n+      if (info.feed->id().output_index() < feed_node->num_outputs()) {\n+        info.data_type =\n+            BaseType(feed_node->output_type(info.feed->id().output_index()));\n+      } else {\n+        return errors::InvalidArgument(\n+            \"Invalid output_index \", info.feed->id().output_index(),\n+            \" for feed node \", info.feed->id().node_name());\n+      }\n     }\n   }\n "