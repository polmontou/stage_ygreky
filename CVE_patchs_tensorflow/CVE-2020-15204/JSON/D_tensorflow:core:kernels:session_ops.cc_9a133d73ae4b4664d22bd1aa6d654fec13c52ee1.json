"diff --git a/tensorflow/core/kernels/session_ops.cc b/tensorflow/core/kernels/session_ops.cc\nindex 9e67fec3c20..ee81ad27632 100644\n--- a/tensorflow/core/kernels/session_ops.cc\n+++ b/tensorflow/core/kernels/session_ops.cc\n@@ -16,6 +16,7 @@ limitations under the License.\n // See docs in ../ops/data_flow_ops.cc.\n \n #include <limits.h>\n+\n #include <vector>\n \n #include \"tensorflow/core/common_runtime/device.h\"\n@@ -27,6 +28,7 @@ limitations under the License.\n #include \"tensorflow/core/framework/types.h\"\n #include \"tensorflow/core/lib/core/errors.h\"\n #include \"tensorflow/core/lib/gtl/map_util.h\"\n+#include \"tensorflow/core/platform/errors.h\"\n #include \"tensorflow/core/platform/logging.h\"\n #include \"tensorflow/core/platform/macros.h\"\n #include \"tensorflow/core/platform/mutex.h\"\n@@ -42,7 +44,11 @@ class GetSessionHandleOp : public OpKernel {\n \n   void Compute(OpKernelContext* ctx) override {\n     const Tensor& val = ctx->input(0);\n-    int64 id = ctx->session_state()->GetNewId();\n+    auto session_state = ctx->session_state();\n+    OP_REQUIRES(ctx, session_state != nullptr,\n+                errors::FailedPrecondition(\n+                    \"GetSessionHandle called on null session state\"));\n+    int64 id = session_state->GetNewId();\n     TensorStore::TensorAndKey tk{val, id, requested_device()};\n     OP_REQUIRES_OK(ctx, ctx->tensor_store()->AddTensor(name(), tk));\n "