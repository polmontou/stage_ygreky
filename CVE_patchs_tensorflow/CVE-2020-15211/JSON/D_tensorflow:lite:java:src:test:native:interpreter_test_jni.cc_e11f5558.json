"diff --git a/tensorflow/lite/java/src/test/native/interpreter_test_jni.cc b/tensorflow/lite/java/src/test/native/interpreter_test_jni.cc\nindex 76bb7b7d4cd..7981a8bb8f5 100644\n--- a/tensorflow/lite/java/src/test/native/interpreter_test_jni.cc\n+++ b/tensorflow/lite/java/src/test/native/interpreter_test_jni.cc\n@@ -33,15 +33,21 @@ Java_org_tensorflow_lite_InterpreterTest_getNativeHandleForDelegate(\n       .free = nullptr,\n       .prepare =\n           [](TfLiteContext* context, TfLiteNode* node) {\n-            const TfLiteTensor* input = tflite::GetInput(context, node, 0);\n-            TfLiteTensor* output = tflite::GetOutput(context, node, 0);\n+            const TfLiteTensor* input;\n+            TF_LITE_ENSURE_OK(context,\n+                              tflite::GetInputSafe(context, node, 0, &input));\n+            TfLiteTensor* output;\n+            TF_LITE_ENSURE_OK(context,\n+                              tflite::GetOutputSafe(context, node, 0, &output));\n             TfLiteIntArray* output_dims = TfLiteIntArrayCopy(input->dims);\n             output->type = kTfLiteFloat32;\n             return context->ResizeTensor(context, output, output_dims);\n           },\n       .invoke =\n           [](TfLiteContext* context, TfLiteNode* node) {\n-            TfLiteTensor* output = tflite::GetOutput(context, node, 0);\n+            TfLiteTensor* output;\n+            TF_LITE_ENSURE_OK(context,\n+                              tflite::GetOutputSafe(context, node, 0, &output));\n             std::fill(output->data.f,\n                       output->data.f + tflite::NumElements(output), 7.0f);\n             return kTfLiteOk;"