"diff --git a/tensorflow/core/kernels/immutable_constant_op.cc b/tensorflow/core/kernels/immutable_constant_op.cc\nindex 0dd08c694eb..1cfbdb82778 100644\n--- a/tensorflow/core/kernels/immutable_constant_op.cc\n+++ b/tensorflow/core/kernels/immutable_constant_op.cc\n@@ -62,6 +62,12 @@ class MemmappedTensorAllocator : public Allocator {\n \n   void set_delete_on_deallocate() { delete_on_deallocate_ = true; }\n \n+  // Make sure tensors or complex types (strings, variants, resources) don't get\n+  // their constructor called via a placement new since that would require\n+  // writing to immutable data.\n+  // See also: tensorflow/core/framework/typed_allocator.h\n+  bool AllocatesOpaqueHandle() const override { return true; }\n+\n  private:\n   std::unique_ptr<ReadOnlyMemoryRegion> memory_region_;\n   // If there is an error during allocation we keep it in this status."