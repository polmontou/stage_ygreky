"diff --git a/tensorflow/core/kernels/fractional_avg_pool_op.cc b/tensorflow/core/kernels/fractional_avg_pool_op.cc\nindex dfc2382624e..b8a5083e534 100644\n--- a/tensorflow/core/kernels/fractional_avg_pool_op.cc\n+++ b/tensorflow/core/kernels/fractional_avg_pool_op.cc\n@@ -80,6 +80,10 @@ class FractionalAvgPoolOp : public OpKernel {\n     std::vector<int> output_size(tensor_in_and_out_dims);\n     for (int i = 0; i < tensor_in_and_out_dims; ++i) {\n       input_size[i] = tensor_in.dim_size(i);\n+      OP_REQUIRES(\n+          context, pooling_ratio_[i] <= input_size[i],\n+          errors::InvalidArgument(\n+              \"Pooling ratio cannot be bigger than input tensor dim size.\"));\n     }\n     // Output size.\n     for (int i = 0; i < tensor_in_and_out_dims; ++i) {"