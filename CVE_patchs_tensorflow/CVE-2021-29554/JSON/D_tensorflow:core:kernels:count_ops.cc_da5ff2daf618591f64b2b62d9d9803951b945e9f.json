"diff --git a/tensorflow/core/kernels/count_ops.cc b/tensorflow/core/kernels/count_ops.cc\nindex eeb0b853c7a..40aa1fe458c 100644\n--- a/tensorflow/core/kernels/count_ops.cc\n+++ b/tensorflow/core/kernels/count_ops.cc\n@@ -122,6 +122,9 @@ class DenseCount : public OpKernel {\n \n     int num_batch_elements = 1;\n     for (int i = 0; i < num_batch_dimensions; ++i) {\n+      OP_REQUIRES(context, data.shape().dim_size(i) != 0,\n+                  errors::InvalidArgument(\n+                      \"Invalid input: Shapes dimension cannot be 0.\"));\n       num_batch_elements *= data.shape().dim_size(i);\n     }\n     int num_value_elements = data.shape().num_elements() / num_batch_elements;"