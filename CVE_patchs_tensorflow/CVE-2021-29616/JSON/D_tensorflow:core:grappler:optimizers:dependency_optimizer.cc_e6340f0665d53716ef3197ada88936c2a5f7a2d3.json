"diff --git a/tensorflow/core/grappler/optimizers/dependency_optimizer.cc b/tensorflow/core/grappler/optimizers/dependency_optimizer.cc\nindex 332d2d4e6d9..1be7f2692e0 100644\n--- a/tensorflow/core/grappler/optimizers/dependency_optimizer.cc\n+++ b/tensorflow/core/grappler/optimizers/dependency_optimizer.cc\n@@ -68,6 +68,12 @@ bool DependencyOptimizer::SafeToRemoveIdentity(const NodeDef& node) const {\n     // The output values of this node may be needed.\n     return false;\n   }\n+\n+  if (node.input_size() < 1) {\n+    // Node lacks input, is invalid\n+    return false;\n+  }\n+\n   const NodeDef* input = node_map_->GetNode(NodeName(node.input(0)));\n   CHECK(input != nullptr) << \"node = \" << node.name()\n                           << \" input = \" << node.input(0);"