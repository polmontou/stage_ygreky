"diff --git a/tensorflow/lite/kernels/internal/averagepool_quantized_test.cc b/tensorflow/lite/kernels/internal/averagepool_quantized_test.cc\nindex cbc863645b7..fea343ae6b8 100644\n--- a/tensorflow/lite/kernels/internal/averagepool_quantized_test.cc\n+++ b/tensorflow/lite/kernels/internal/averagepool_quantized_test.cc\n@@ -40,12 +40,14 @@ void RunOneAveragePoolTest(const PoolParams& params,\n   std::vector<int8> optimized_averagePool_output(buffer_size);\n   std::vector<int8> reference_averagePool_output(buffer_size);\n \n-  reference_integer_ops::AveragePool(params, input_shape, input_data,\n-                                     output_shape,\n-                                     reference_averagePool_output.data());\n-  optimized_integer_ops::AveragePool(params, input_shape, input_data,\n-                                     output_shape,\n-                                     optimized_averagePool_output.data());\n+  bool reference_success = reference_integer_ops::AveragePool(\n+      params, input_shape, input_data, output_shape,\n+      reference_averagePool_output.data());\n+  bool optimized_success = optimized_integer_ops::AveragePool(\n+      params, input_shape, input_data, output_shape,\n+      optimized_averagePool_output.data());\n+  EXPECT_TRUE(reference_success);\n+  EXPECT_TRUE(optimized_success);\n \n   for (int i = 0; i < buffer_size; i++) {\n     EXPECT_TRUE(reference_averagePool_output[i] =="