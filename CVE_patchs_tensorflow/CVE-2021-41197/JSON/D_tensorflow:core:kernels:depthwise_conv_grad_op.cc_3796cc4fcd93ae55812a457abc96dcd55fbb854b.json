"diff --git a/tensorflow/core/kernels/depthwise_conv_grad_op.cc b/tensorflow/core/kernels/depthwise_conv_grad_op.cc\nindex e7dadd1ab12..14372266d84 100644\n--- a/tensorflow/core/kernels/depthwise_conv_grad_op.cc\n+++ b/tensorflow/core/kernels/depthwise_conv_grad_op.cc\n@@ -625,7 +625,7 @@ class DepthwiseConv2dNativeBackpropInputOp : public OpKernel {\n       OP_REQUIRES(context, in_sizes_data[i] >= 0,\n                   errors::InvalidArgument(\"Dimension \", i,\n                                           \" of input_sizes must be >= 0\"));\n-      input_shape.AddDim(in_sizes_data[i]);\n+      OP_REQUIRES_OK(context, input_shape.AddDimWithStatus(in_sizes_data[i]));\n     }\n     const TensorShape& filter_shape = filter.shape();\n     EXTRACT_AND_VERIFY_DIMENSIONS(\"DepthwiseConv2DBackpropInput\");\n@@ -1131,7 +1131,8 @@ class DepthwiseConv2dNativeBackpropFilterOp : public OpKernel {\n       OP_REQUIRES(context, filter_sizes_data[i] >= 0,\n                   errors::InvalidArgument(\"Dimension \", i,\n                                           \" of filter_sizes must be >= 0\"));\n-      filter_shape.AddDim(filter_sizes_data[i]);\n+      OP_REQUIRES_OK(context,\n+                     filter_shape.AddDimWithStatus(filter_sizes_data[i]));\n     }\n     const TensorShape& input_shape = input.shape();\n "