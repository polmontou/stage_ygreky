"diff --git a/tensorflow/core/kernels/sequence_ops.cc b/tensorflow/core/kernels/sequence_ops.cc\nindex ad1b1471c30..bdcf83eb376 100644\n--- a/tensorflow/core/kernels/sequence_ops.cc\n+++ b/tensorflow/core/kernels/sequence_ops.cc\n@@ -78,9 +78,10 @@ class RangeOp : public OpKernel {\n     } else {\n       size = static_cast<int64>(std::ceil(std::abs((limit - start) / delta)));\n     }\n+    TensorShape shape;\n+    OP_REQUIRES_OK(context, shape.AddDimWithStatus(size));\n     Tensor* out = nullptr;\n-    OP_REQUIRES_OK(context,\n-                   context->allocate_output(0, TensorShape({size}), &out));\n+    OP_REQUIRES_OK(context, context->allocate_output(0, shape, &out));\n     auto flat = out->flat<T>();\n     T val = start;\n     for (int64_t i = 0; i < size; ++i) {"