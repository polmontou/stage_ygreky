"diff --git a/tensorflow/core/kernels/pooling_ops_common.cc b/tensorflow/core/kernels/pooling_ops_common.cc\nindex 817072cc761..d621e77790c 100644\n--- a/tensorflow/core/kernels/pooling_ops_common.cc\n+++ b/tensorflow/core/kernels/pooling_ops_common.cc\n@@ -465,6 +465,16 @@ void DnnPoolingGradOp<T>::Compute(\n   if (!context->status().ok()) {\n     return;\n   }\n+  if (tensor_out) {\n+    OP_REQUIRES(context, tensor_out->shape() == params.forward_output_shape(),\n+                errors::InvalidArgument(\"Expected orig_output shape to be \",\n+                                        params.forward_output_shape(),\n+                                        \", but got \", tensor_out->shape()));\n+  }\n+  OP_REQUIRES(context, out_backprop.shape() == params.forward_output_shape(),\n+              errors::InvalidArgument(\"Expected grad shape to be \",\n+                                      params.forward_output_shape(),\n+                                      \", but got \", out_backprop.shape()));\n \n   TensorFormat transformed_input_data_format = data_format;\n "