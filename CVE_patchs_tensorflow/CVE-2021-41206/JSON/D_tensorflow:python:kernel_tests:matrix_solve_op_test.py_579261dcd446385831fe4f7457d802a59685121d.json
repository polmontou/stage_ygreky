"diff --git a/tensorflow/python/kernel_tests/matrix_solve_op_test.py b/tensorflow/python/kernel_tests/matrix_solve_op_test.py\nindex 0d149de2acb..1739b2272be 100644\n--- a/tensorflow/python/kernel_tests/matrix_solve_op_test.py\n+++ b/tensorflow/python/kernel_tests/matrix_solve_op_test.py\n@@ -112,6 +112,12 @@ class MatrixSolveOpTest(test.TestCase):\n     with self.assertRaises((ValueError, errors_impl.InvalidArgumentError)):\n       self.evaluate(linalg_ops.matrix_solve(matrix, rhs))\n \n+    # The matrix and right-hand side should have the same batch dimensions\n+    matrix = np.random.normal(size=(2, 6, 2, 2))\n+    rhs = np.random.normal(size=(2, 3, 2, 2))\n+    with self.assertRaises((ValueError, errors_impl.InvalidArgumentError)):\n+      self.evaluate(linalg_ops.matrix_solve(matrix, rhs))\n+\n   def testNotInvertible(self):\n     # The input should be invertible.\n     with self.assertRaisesOpError(\"Input matrix is not invertible.\"):"