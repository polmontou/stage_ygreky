"diff --git a/tensorflow/core/framework/attr_value_util.cc b/tensorflow/core/framework/attr_value_util.cc\nindex 20f34cc46c8..019063e22d3 100644\n--- a/tensorflow/core/framework/attr_value_util.cc\n+++ b/tensorflow/core/framework/attr_value_util.cc\n@@ -45,7 +45,7 @@ constexpr int kMaxTensorNestDepth = 100;\n // not fully defined return -1.\n int64_t TensorByteSize(const TensorProto& t) {\n   // num_elements returns -1 if shape is not fully defined.\n-  int64_t num_elems = TensorShape(t.tensor_shape()).num_elements();\n+  int64_t num_elems = PartialTensorShape(t.tensor_shape()).num_elements();\n   return num_elems < 0 ? -1 : num_elems * DataTypeSize(t.dtype());\n }\n "