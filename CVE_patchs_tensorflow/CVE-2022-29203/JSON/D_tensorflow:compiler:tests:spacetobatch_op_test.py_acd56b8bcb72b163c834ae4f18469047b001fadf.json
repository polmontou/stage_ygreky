"diff --git a/tensorflow/compiler/tests/spacetobatch_op_test.py b/tensorflow/compiler/tests/spacetobatch_op_test.py\nindex bb3d4b18120..016c05f11e0 100644\n--- a/tensorflow/compiler/tests/spacetobatch_op_test.py\n+++ b/tensorflow/compiler/tests/spacetobatch_op_test.py\n@@ -17,6 +17,7 @@\n import numpy as np\n \n from tensorflow.compiler.tests import xla_test\n+from tensorflow.python.framework import constant_op\n from tensorflow.python.framework import dtypes\n from tensorflow.python.ops import array_ops\n from tensorflow.python.ops import gen_array_ops\n@@ -145,6 +146,29 @@ class SpaceToBatchTest(xla_test.XLATestCase):\n     self._testOne(x_np, block_size, x_out)\n \n \n+class SpaceToBatchNDErrorHandlingTest(xla_test.XLATestCase):\n+\n+  def testInvalidBlockShape(self):\n+    with self.assertRaisesRegex(ValueError, \"block_shape must be positive\"):\n+      with self.session() as sess, self.test_scope():\n+        tf_in = constant_op.constant(\n+            -3.5e+35, shape=[10, 20, 20], dtype=dtypes.float32)\n+        block_shape = constant_op.constant(-10, shape=[2], dtype=dtypes.int64)\n+        paddings = constant_op.constant(0, shape=[2, 2], dtype=dtypes.int32)\n+        sess.run(array_ops.space_to_batch_nd(tf_in, block_shape, paddings))\n+\n+  def testOutputSizeOutOfBounds(self):\n+    with self.assertRaisesRegex(ValueError,\n+                                \"Negative.* dimension size caused by overflow\"):\n+      with self.session() as sess, self.test_scope():\n+        tf_in = constant_op.constant(\n+            -3.5e+35, shape=[10, 19, 22], dtype=dtypes.float32)\n+        block_shape = constant_op.constant(\n+            1879048192, shape=[2], dtype=dtypes.int64)\n+        paddings = constant_op.constant(0, shape=[2, 2], dtype=dtypes.int32)\n+        sess.run(array_ops.space_to_batch_nd(tf_in, block_shape, paddings))\n+\n+\n class SpaceToBatchNDTest(xla_test.XLATestCase):\n   \"\"\"Tests input-output pairs for the SpaceToBatchND and BatchToSpaceND ops.\"\"\"\n "