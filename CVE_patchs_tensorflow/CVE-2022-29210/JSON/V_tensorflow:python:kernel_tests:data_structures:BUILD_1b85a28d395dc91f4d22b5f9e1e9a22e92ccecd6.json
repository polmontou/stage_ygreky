"# Tests of TensorFlow kernels written using the Python API.\n\nload(\"//tensorflow:tensorflow.bzl\", \"cuda_py_test\")\n\n# buildifier: disable=same-origin-load\nload(\"//tensorflow:tensorflow.bzl\", \"tf_py_test\")\n\npackage(\n    default_visibility = [\"//tensorflow:internal\"],\n    licenses = [\"notice\"],\n)\n\ntf_py_test(\n    name = \"barrier_ops_test\",\n    size = \"medium\",  # NOTE(ebrevdo): This test is NOT small.\n    srcs = [\"barrier_ops_test.py\"],\n    shard_count = 20,\n    tags = [\n        \"no_mac\",  # TODO(b/129706424): Re-enable this test on Mac.\n        \"nomsan\",  # TODO(b/161902335): Re-enable.\n        \"notsan\",  # TODO(b/161829717): Re-enable.\n    ],\n    deps = [\n        \"//tensorflow/python:client_testlib\",\n        \"//tensorflow/python:data_flow_ops\",\n        \"//tensorflow/python:errors\",\n        \"//tensorflow/python:framework_for_generated_wrappers\",\n        \"//third_party/py/numpy\",\n    ],\n)\n\ntf_py_test(\n    name = \"conditional_accumulator_test\",\n    size = \"small\",\n    srcs = [\"conditional_accumulator_test.py\"],\n    deps = [\n        \"//tensorflow/python:array_ops\",\n        \"//tensorflow/python:client_testlib\",\n        \"//tensorflow/python:data_flow_ops\",\n        \"//tensorflow/python:errors\",\n        \"//tensorflow/python:framework_for_generated_wrappers\",\n        \"//tensorflow/python:math_ops\",\n        \"//tensorflow/python:state_ops\",\n        \"//tensorflow/python:variables\",\n        \"//third_party/py/numpy\",\n    ],\n)\n\ncuda_py_test(\n    name = \"dynamic_partition_op_test\",\n    size = \"medium\",\n    srcs = [\"dynamic_partition_op_test.py\"],\n    tags = [\n        \"multi_and_single_gpu\",\n    ],\n    deps = [\n        \"//tensorflow/python:array_ops\",\n        \"//tensorflow/python:client_testlib\",\n        \"//tensorflow/python:data_flow_grad\",\n        \"//tensorflow/python:data_flow_ops\",\n        \"//tensorflow/python:framework_for_generated_wrappers\",\n        \"//tensorflow/python:gradients\",\n        \"//third_party/py/numpy\",\n    ],\n)\n\ncuda_py_test(\n    name = \"dynamic_stitch_op_test\",\n    size = \"small\",\n    srcs = [\"dynamic_stitch_op_test.py\"],\n    deps = [\n        \"//tensorflow/python:client_testlib\",\n        \"//tensorflow/python:data_flow_grad\",\n        \"//tensorflow/python:data_flow_ops\",\n        \"//tensorflow/python:framework_for_generated_wrappers\",\n        \"//tensorflow/python:gradients\",\n        \"//third_party/py/numpy\",\n    ],\n)\n\ntf_py_test(\n    name = \"fifo_queue_test\",\n    size = \"small\",\n    srcs = [\"fifo_queue_test.py\"],\n    tags = [\"no_rocm\"],\n    deps = [\n        \"//tensorflow/core:protos_all_py\",\n        \"//tensorflow/python:array_ops\",\n        \"//tensorflow/python:client\",\n        \"//tensorflow/python:client_testlib\",\n        \"//tensorflow/python:data_flow_ops\",\n        \"//tensorflow/python:errors\",\n        \"//tensorflow/python:framework_for_generated_wrappers\",\n        \"//tensorflow/python:util\",\n        \"//third_party/py/numpy\",\n    ],\n)\n\ntf_py_test(\n    name = \"listdiff_op_test\",\n    size = \"small\",\n    srcs = [\"listdiff_op_test.py\"],\n    deps = [\n        \"//tensorflow/python:array_ops\",\n        \"//tensorflow/python:client_testlib\",\n        \"//tensorflow/python:framework_for_generated_wrappers\",\n        \"//tensorflow/python:util\",\n        \"//third_party/py/numpy\",\n    ],\n)\n\ncuda_py_test(\n    name = \"list_ops_test\",\n    size = \"small\",\n    srcs = [\"list_ops_test.py\"],\n    grpc_enabled = True,\n    tags = [\n        \"noasan\",  # TODO(b/155406705): flaky\n    ],\n    deps = [\n        \"//tensorflow/core:protos_all_py\",\n        \"//tensorflow/python:array_ops\",\n        \"//tensorflow/python:client_testlib\",\n        \"//tensorflow/python:framework_for_generated_wrappers\",\n        \"//tensorflow/python:framework_test_lib\",\n        \"//tensorflow/python:gradients_impl\",\n        \"//tensorflow/python:list_ops\",\n        \"//tensorflow/python:math_ops\",\n        \"//tensorflow/python:tensor_shape\",\n        \"//tensorflow/python/eager:context\",\n        \"//tensorflow/python/eager:def_function\",\n        \"//third_party/py/numpy\",\n        \"@absl_py//absl/testing:parameterized\",\n    ],\n)\n\ntf_py_test(\n    name = \"lookup_ops_test\",\n    size = \"small\",\n    srcs = [\"lookup_ops_test.py\"],\n    grpc_enabled = True,\n    deps = [\n        \"//tensorflow/python:client\",\n        \"//tensorflow/python:client_testlib\",\n        \"//tensorflow/python:errors\",\n        \"//tensorflow/python:framework_for_generated_wrappers\",\n        \"//tensorflow/python:framework_test_lib\",\n        \"//tensorflow/python:lookup_ops\",\n        \"//tensorflow/python:sparse_tensor\",\n        \"//tensorflow/python:tensor_spec\",\n        \"//tensorflow/python:test_ops\",\n        \"//tensorflow/python:training\",\n        \"//tensorflow/python/data/ops:dataset_ops\",\n        \"//tensorflow/python/data/ops:readers\",\n        \"//tensorflow/python/saved_model:load\",\n        \"//tensorflow/python/saved_model:save\",\n    ],\n)\n\n# TODO(kattian): add GPU capability and change to cuda_py_test\ntf_py_test(\n    name = \"map_ops_test\",\n    size = \"small\",\n    srcs = [\"map_ops_test.py\"],\n    grpc_enabled = True,\n    tags = [\n        \"no_windows\",  # TODO(b/192259628)\n        \"noasan\",  # TODO(b/164696004)\n        \"notsan\",  # TODO(b/164696004)\n    ],\n    deps = [\n        \"//tensorflow/python:array_ops\",\n        \"//tensorflow/python:client_testlib\",\n        \"//tensorflow/python:framework_for_generated_wrappers\",\n        \"//tensorflow/python:framework_test_lib\",\n        \"//tensorflow/python:gradients_impl\",\n        \"//tensorflow/python:map_ops\",\n        \"//tensorflow/python:math_ops\",\n        \"//tensorflow/python:tensor_shape\",\n        \"//tensorflow/python/eager:context\",\n        \"//tensorflow/python/eager:def_function\",\n        \"//third_party/py/numpy\",\n        \"@absl_py//absl/testing:parameterized\",\n    ],\n)\n\ncuda_py_test(\n    name = \"map_stage_op_test\",\n    size = \"medium\",\n    srcs = [\"map_stage_op_test.py\"],\n    tags = [\"no_oss\"],  # b/124474135\n    deps = [\n        \"//tensorflow/python:array_ops\",\n        \"//tensorflow/python:client_testlib\",\n        \"//tensorflow/python:data_flow_ops\",\n        \"//tensorflow/python:framework_for_generated_wrappers\",\n        \"//tensorflow/python:math_ops\",\n        \"//tensorflow/python:util\",\n    ],\n)\n\ncuda_py_test(\n    name = \"padding_fifo_queue_test\",\n    size = \"small\",\n    srcs = [\"padding_fifo_queue_test.py\"],\n    deps = [\n        \"//tensorflow/python:array_ops\",\n        \"//tensorflow/python:client_testlib\",\n        \"//tensorflow/python:data_flow_ops\",\n        \"//tensorflow/python:errors\",\n        \"//tensorflow/python:framework_for_generated_wrappers\",\n        \"//third_party/py/numpy\",\n    ],\n)\n\ntf_py_test(\n    name = \"priority_queue_test\",\n    size = \"medium\",\n    srcs = [\"priority_queue_test.py\"],\n    deps = [\n        \"//tensorflow/python:array_ops\",\n        \"//tensorflow/python:client_testlib\",\n        \"//tensorflow/python:data_flow_ops\",\n        \"//tensorflow/python:errors\",\n        \"//tensorflow/python:framework_for_generated_wrappers\",\n        \"//tensorflow/python:nn_grad\",\n        \"//third_party/py/numpy\",\n    ],\n)\n\ncuda_py_test(\n    name = \"stack_ops_test\",\n    size = \"small\",\n    srcs = [\"stack_ops_test.py\"],\n    deps = [\n        \"//tensorflow/python:client_testlib\",\n        \"//tensorflow/python:control_flow_ops\",\n        \"//tensorflow/python:data_flow_ops_gen\",\n        \"//tensorflow/python:errors\",\n        \"//tensorflow/python:framework_for_generated_wrappers\",\n        \"//tensorflow/python:math_ops\",\n        \"//third_party/py/numpy\",\n    ],\n)\n\ncuda_py_test(\n    name = \"stage_op_test\",\n    size = \"medium\",\n    srcs = [\"stage_op_test.py\"],\n    deps = [\n        \"//tensorflow/python:array_ops\",\n        \"//tensorflow/python:client_testlib\",\n        \"//tensorflow/python:data_flow_ops\",\n        \"//tensorflow/python:framework_for_generated_wrappers\",\n        \"//tensorflow/python:math_ops\",\n        \"//tensorflow/python:util\",\n    ],\n)\n\ncuda_py_test(\n    name = \"tensor_array_ops_test\",\n    size = \"medium\",\n    srcs = [\"tensor_array_ops_test.py\"],\n    flaky = 1,  # create_local_cluster sometimes times out.\n    shard_count = 10,\n    deps = [\n        \"//tensorflow/python:array_ops\",\n        \"//tensorflow/python:client_testlib\",\n        \"//tensorflow/python:cond_v2\",\n        \"//tensorflow/python:control_flow_ops\",\n        \"//tensorflow/python:data_flow_ops_gen\",\n        \"//tensorflow/python:distributed_framework_test_lib\",\n        \"//tensorflow/python:framework_for_generated_wrappers\",\n        \"//tensorflow/python:framework_test_lib\",\n        \"//tensorflow/python:gradients\",\n        \"//tensorflow/python:init_ops\",\n        \"//tensorflow/python:math_ops\",\n        \"//tensorflow/python:nn_grad\",\n        \"//tensorflow/python:tensor_array_grad\",\n        \"//tensorflow/python:tensor_array_ops\",\n        \"//tensorflow/python:tensor_spec\",\n        \"//tensorflow/python:training\",\n        \"//tensorflow/python:variable_scope\",\n        \"//tensorflow/python:variables\",\n        \"//tensorflow/python:while_v2\",\n        \"//tensorflow/python/data/ops:dataset_ops\",\n        \"//tensorflow/python/eager:backprop\",\n        \"//tensorflow/python/eager:context\",\n        \"//tensorflow/python/eager:def_function\",\n        \"//third_party/py/numpy\",\n    ],\n)"