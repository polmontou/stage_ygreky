"diff --git a/tensorflow/core/kernels/pooling_ops_3d.cc b/tensorflow/core/kernels/pooling_ops_3d.cc\nindex 57f4ac80eca..60f1718f240 100644\n--- a/tensorflow/core/kernels/pooling_ops_3d.cc\n+++ b/tensorflow/core/kernels/pooling_ops_3d.cc\n@@ -523,7 +523,7 @@ class AvgPooling3dGradOp : public OpKernel {\n     TensorShape output_shape;\n     auto shape_vec = tensor_in_shape.vec<int32>();\n     for (int64_t i = 0; i < tensor_in_shape.NumElements(); ++i) {\n-      output_shape.AddDim(shape_vec(i));\n+      OP_REQUIRES_OK(context, output_shape.AddDimWithStatus(shape_vec(i)));\n     }\n \n     Tensor* output;"