"diff --git a/tensorflow/core/util/tensor_slice_writer.cc b/tensorflow/core/util/tensor_slice_writer.cc\nindex ca907916fd3..75197a52c6d 100644\n--- a/tensorflow/core/util/tensor_slice_writer.cc\n+++ b/tensorflow/core/util/tensor_slice_writer.cc\n@@ -131,6 +131,16 @@ Status TensorSliceWriter::Finish() {\n \n /* static */\n size_t TensorSliceWriter::MaxBytesPerElement(DataType dt) {\n+  size_t max_bytes_per_element =\n+      TensorSliceWriter::MaxBytesPerElementOrZero(dt);\n+  if (max_bytes_per_element == 0) {\n+    LOG(FATAL) << \"MaxBytesPerElement not implemented for dtype: \" << dt;\n+  }\n+  return max_bytes_per_element;\n+}\n+\n+/* static */\n+size_t TensorSliceWriter::MaxBytesPerElementOrZero(DataType dt) {\n   switch (dt) {\n     case DT_FLOAT:\n       return 4;\n@@ -170,9 +180,8 @@ size_t TensorSliceWriter::MaxBytesPerElement(DataType dt) {\n     case DT_STRING:\n     case DT_BFLOAT16:\n     default:\n-      LOG(FATAL) << \"MaxBytesPerElement not implemented for dtype: \" << dt;\n+      return 0;\n   }\n-  return 0;\n }\n \n template <>"