"diff --git a/tensorflow/core/util/tensor_slice_writer_test.cc b/tensorflow/core/util/tensor_slice_writer_test.cc\nindex c9740730a66..5120be5a8b5 100644\n--- a/tensorflow/core/util/tensor_slice_writer_test.cc\n+++ b/tensorflow/core/util/tensor_slice_writer_test.cc\n@@ -15,17 +15,19 @@ limitations under the License.\n \n #include \"tensorflow/core/util/tensor_slice_writer.h\"\n \n+#include <algorithm>\n #include <array>\n+#include <memory>\n+#include <vector>\n \n #include \"tensorflow/core/framework/tensor_shape.pb.h\"\n #include \"tensorflow/core/framework/versions.pb.h\"\n #include \"tensorflow/core/lib/core/status_test_util.h\"\n-#include \"tensorflow/core/lib/core/stringpiece.h\"\n-#include \"tensorflow/core/lib/io/path.h\"\n-#include \"tensorflow/core/lib/strings/str_util.h\"\n #include \"tensorflow/core/platform/logging.h\"\n+#include \"tensorflow/core/platform/path.h\"\n #include \"tensorflow/core/platform/protobuf.h\"\n #include \"tensorflow/core/platform/test.h\"\n+#include \"tensorflow/core/protobuf/error_codes.pb.h\"\n #include \"tensorflow/core/public/version.h\"\n #include \"tensorflow/core/util/saved_tensor_slice_util.h\"\n #include \"tensorflow/core/util/tensor_slice_reader.h\"\n@@ -362,6 +364,17 @@ TEST(TensorSliceWriteTest, SizeErrors) {\n   }\n }\n \n+TEST(TensorSliceWriterTest, InvalidInput) {\n+  SavedSlice ss;\n+  std::array<uint32_t, 1> data;\n+  std::fill(data.begin(), data.end(), 1234);\n+  Status s = TensorSliceWriter::SaveData(data.data(), data.size(), &ss);\n+  EXPECT_EQ(s.code(), error::INVALID_ARGUMENT);\n+  EXPECT_TRUE(absl::StrContains(\n+      s.error_message(),\n+      \"Tensor slice serialization not implemented for dtype\"));\n+}\n+\n }  // namespace checkpoint\n \n }  // namespace tensorflow"