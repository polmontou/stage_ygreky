"diff --git a/tensorflow/core/kernels/list_kernels.h b/tensorflow/core/kernels/list_kernels.h\nindex b5c1a6537e7..9a0782b830c 100644\n--- a/tensorflow/core/kernels/list_kernels.h\n+++ b/tensorflow/core/kernels/list_kernels.h\n@@ -909,7 +909,12 @@ class TensorListScatter : public OpKernel {\n     OP_REQUIRES_OK(c, TensorShapeFromTensor(c->input(2), &element_shape));\n     // TensorListScatterV2 passes the num_elements input, TensorListScatter does\n     // not.\n-    int num_elements = c->num_inputs() >= 4 ? c->input(3).scalar<int>()() : -1;\n+    int num_elements = -1;\n+    if (c->num_inputs() >= 4) {\n+      OP_REQUIRES(c, TensorShapeUtils::IsScalar(c->input(3).shape()),\n+                  errors::InvalidArgument(\"num_elements must be a scalar\"));\n+      num_elements = c->input(3).scalar<int>()();\n+    }\n     OP_REQUIRES(c, num_elements >= -1,\n                 errors::InvalidArgument(\n                     \"TensorListScatter expects num_elements >= -1, found: \","