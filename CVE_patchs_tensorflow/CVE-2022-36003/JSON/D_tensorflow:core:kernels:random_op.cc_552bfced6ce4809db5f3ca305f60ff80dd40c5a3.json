"diff --git a/tensorflow/core/kernels/random_op.cc b/tensorflow/core/kernels/random_op.cc\nindex 8ec9ed7d24b..b85c120eba9 100644\n--- a/tensorflow/core/kernels/random_op.cc\n+++ b/tensorflow/core/kernels/random_op.cc\n@@ -166,7 +166,7 @@ class RandomGammaOp : public OpKernel {\n     }\n     const int64_t samples_per_alpha = samples_shape.num_elements();\n \n-    samples_shape.AppendShape(alpha_t.shape());\n+    OP_REQUIRES_OK(ctx, samples_shape.AppendShapeWithStatus(alpha_t.shape()));\n     // Allocate output samples.\n     Tensor* samples_t = nullptr;\n     OP_REQUIRES_OK(ctx, ctx->allocate_output(0, samples_shape, &samples_t));"