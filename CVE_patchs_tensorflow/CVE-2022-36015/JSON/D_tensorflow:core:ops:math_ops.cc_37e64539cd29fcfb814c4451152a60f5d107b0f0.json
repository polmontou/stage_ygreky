"diff --git a/tensorflow/core/ops/math_ops.cc b/tensorflow/core/ops/math_ops.cc\nindex 89af24cee24..26347788305 100644\n--- a/tensorflow/core/ops/math_ops.cc\n+++ b/tensorflow/core/ops/math_ops.cc\n@@ -1487,17 +1487,18 @@ Status RangeSize(const Tensor* start_t, const Tensor* limit_t,\n     return errors::InvalidArgument(\"Requires delta != 0\");\n   }\n \n-  auto size = (std::is_integral<T>::value\n-                   ? ((Eigen::numext::abs(limit - start) +\n-                       Eigen::numext::abs(delta) - T(1)) /\n-                      Eigen::numext::abs(delta))\n-                   : (Eigen::numext::ceil(\n-                         Eigen::numext::abs((limit - start) / delta))));\n-\n-  // Undefined behaviour if size will not fit into int64_t\n-  if (size > std::numeric_limits<int64_t>::max()) {\n-    return errors::InvalidArgument(\"Requires ((limit - start) / delta) <= \",\n-                                   std::numeric_limits<int64_t>::max());\n+  int64_t size;\n+  if (std::is_integral<T>::value) {\n+    size = Eigen::divup(static_cast<int64_t>(Eigen::numext::abs(limit - start)),\n+                        static_cast<int64_t>(Eigen::numext::abs(delta)));\n+  } else {\n+    auto size_auto =\n+        Eigen::numext::ceil(Eigen::numext::abs((limit - start) / delta));\n+    if (size_auto > std::numeric_limits<int64_t>::max()) {\n+      return errors::InvalidArgument(\"Requires ((limit - start) / delta) <= \",\n+                                     std::numeric_limits<int64_t>::max());\n+    }\n+    size = static_cast<int64_t>(size_auto);\n   }\n \n   c->set_output(0, c->Vector(static_cast<int64_t>(size)));"