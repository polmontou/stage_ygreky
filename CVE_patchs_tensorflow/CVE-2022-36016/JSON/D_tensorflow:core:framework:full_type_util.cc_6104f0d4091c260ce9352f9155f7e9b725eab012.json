"diff --git a/tensorflow/core/framework/full_type_util.cc b/tensorflow/core/framework/full_type_util.cc\nindex 97e9381df13..a8636420f11 100644\n--- a/tensorflow/core/framework/full_type_util.cc\n+++ b/tensorflow/core/framework/full_type_util.cc\n@@ -175,7 +175,11 @@ Status SubstituteVar(AttrMap& attrs, FullTypeDef& t) {\n }\n \n Status SubstituteForEach(AttrMap& attrs, FullTypeDef& t) {\n-  DCHECK_EQ(t.args_size(), 3);\n+  if (t.args_size() != 3) {\n+    return Status(error::INVALID_ARGUMENT,\n+                  absl::StrCat(\"illegal FOR_EACH type, expected 3 args, got \",\n+                               t.args_size()));\n+  }\n \n   const auto& cont = t.args(0);\n   const auto& tmpl = t.args(1);"