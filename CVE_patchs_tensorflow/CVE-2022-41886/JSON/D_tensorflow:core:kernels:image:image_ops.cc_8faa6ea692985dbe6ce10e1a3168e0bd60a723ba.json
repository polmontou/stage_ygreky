"diff --git a/tensorflow/core/kernels/image/image_ops.cc b/tensorflow/core/kernels/image/image_ops.cc\nindex c2e769f146c..113a9b2af9a 100644\n--- a/tensorflow/core/kernels/image/image_ops.cc\n+++ b/tensorflow/core/kernels/image/image_ops.cc\n@@ -96,11 +96,12 @@ void DoImageProjectiveTransformOp(OpKernelContext* ctx,\n   }\n \n   Tensor* output_t;\n+  TensorShape output_shape;\n   OP_REQUIRES_OK(\n-      ctx, ctx->allocate_output(0,\n-                                TensorShape({images_t.dim_size(0), out_height,\n-                                             out_width, images_t.dim_size(3)}),\n-                                &output_t));\n+      ctx, TensorShape::BuildTensorShape({images_t.dim_size(0), out_height,\n+                                          out_width, images_t.dim_size(3)},\n+                                         &output_shape));\n+  OP_REQUIRES_OK(ctx, ctx->allocate_output(0, output_shape, &output_t));\n   auto output = output_t->tensor<T, 4>();\n   auto images = images_t.tensor<T, 4>();\n   auto transform = transform_t.matrix<float>();"