"diff --git a/tensorflow/core/kernels/mfcc_mel_filterbank.cc b/tensorflow/core/kernels/mfcc_mel_filterbank.cc\nindex 8eb2d9d8309..c5c2d29d37b 100644\n--- a/tensorflow/core/kernels/mfcc_mel_filterbank.cc\n+++ b/tensorflow/core/kernels/mfcc_mel_filterbank.cc\n@@ -32,6 +32,8 @@ limitations under the License.\n \n #include <math.h>\n \n+#include <limits>\n+\n #include \"tensorflow/core/platform/logging.h\"\n \n namespace tensorflow {\n@@ -74,7 +76,17 @@ bool MfccMelFilterbank::Initialize(int input_length, double input_sample_rate,\n \n   // An extra center frequency is computed at the top to get the upper\n   // limit on the high side of the final triangular filter.\n-  center_frequencies_.resize(num_channels_ + 1);\n+  std::size_t center_frequencies_size = std::size_t(num_channels_) + 1;\n+  if (center_frequencies_size >= std::numeric_limits<int>::max() ||\n+      center_frequencies_size > center_frequencies_.max_size()) {\n+    LOG(ERROR) << \"Number of filterbank channels must be less than \"\n+               << std::numeric_limits<int>::max()\n+               << \" and less than or equal to \"\n+               << center_frequencies_.max_size();\n+    return false;\n+  }\n+  center_frequencies_.resize(center_frequencies_size);\n+\n   const double mel_low = FreqToMel(lower_frequency_limit);\n   const double mel_hi = FreqToMel(upper_frequency_limit);\n   const double mel_span = mel_hi - mel_low;"