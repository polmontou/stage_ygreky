"diff --git a/tensorflow/core/kernels/image/resize_nearest_neighbor_op.cc b/tensorflow/core/kernels/image/resize_nearest_neighbor_op.cc\nindex a54b60f0099..0d0e0cbdbe6 100644\n--- a/tensorflow/core/kernels/image/resize_nearest_neighbor_op.cc\n+++ b/tensorflow/core/kernels/image/resize_nearest_neighbor_op.cc\n@@ -257,11 +257,11 @@ class ResizeNearestNeighborOpGrad : public OpKernel {\n     const int64_t out_width = sizes(1);\n \n     Tensor* output = nullptr;\n-    OP_REQUIRES_OK(\n-        context,\n-        context->allocate_output(\n-            0, TensorShape({batch_size, out_height, out_width, channels}),\n-            &output));\n+    TensorShape shape;\n+    OP_REQUIRES_OK(context,\n+                   TensorShape::BuildTensorShape(\n+                       {batch_size, out_height, out_width, channels}, &shape));\n+    OP_REQUIRES_OK(context, context->allocate_output(0, shape, &output));\n \n     // Return if the output is empty.\n     if (output->NumElements() == 0) return;"