"diff --git a/tensorflow/core/kernels/composite_tensor_ops.cc b/tensorflow/core/kernels/composite_tensor_ops.cc\nindex bc4f96e6bb2..4e689d27d5a 100644\n--- a/tensorflow/core/kernels/composite_tensor_ops.cc\n+++ b/tensorflow/core/kernels/composite_tensor_ops.cc\n@@ -73,6 +73,10 @@ class CompositeTensorVariantToComponents : public OpKernel {\n                                 \"tensor, but got \",\n                                 encoded_t.DebugString()));\n     auto* encoded = encoded_t.flat<Variant>()(0).get<CompositeTensorVariant>();\n+    OP_REQUIRES(context, encoded != nullptr,\n+                errors::InvalidArgument(\"The input `encoded` is not a valid \"\n+                                        \"CompositeTensorVariant tensor, got \",\n+                                        encoded_t.DebugString()));\n \n     // Check that the encoded TypeSpec is compatible with the expected TypeSpec.\n     // For now, we just check that the class matches."