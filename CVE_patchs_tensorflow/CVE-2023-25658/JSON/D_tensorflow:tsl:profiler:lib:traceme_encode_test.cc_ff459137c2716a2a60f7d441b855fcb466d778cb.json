"diff --git a/tensorflow/tsl/profiler/lib/traceme_encode_test.cc b/tensorflow/tsl/profiler/lib/traceme_encode_test.cc\nindex f7fdf53ad3c..d058e27bc09 100644\n--- a/tensorflow/tsl/profiler/lib/traceme_encode_test.cc\n+++ b/tensorflow/tsl/profiler/lib/traceme_encode_test.cc\n@@ -17,6 +17,7 @@ limitations under the License.\n #include <string>\n \n #include \"absl/strings/str_cat.h\"\n+#include \"absl/strings/str_format.h\"\n #include \"tensorflow/tsl/platform/platform.h\"\n #include \"tensorflow/tsl/platform/test.h\"\n \n@@ -53,6 +54,27 @@ TEST(TraceMeEncodeTest, TemporaryStringTest) {\n }\n #endif\n \n+// This can be removed when the absl version has been updated to include\n+// AbslStringify for open source builds.\n+#if defined(PLATFORM_GOOGLE)\n+\n+struct Point {\n+  template <typename Sink>\n+  friend void AbslStringify(Sink& sink, const Point& p) {\n+    absl::Format(&sink, \"(%d, %d)\", p.x, p.y);\n+  }\n+\n+  int x;\n+  int y;\n+};\n+\n+TEST(TraceMeEncodeTest, AbslStringifyTest) {\n+  EXPECT_EQ(TraceMeEncode(\"Plot\", {{\"point\", Point{10, 20}}}),\n+            \"Plot#point=(10, 20)#\");\n+}\n+\n+#endif\n+\n TEST(TraceMeEncodeTest, NoNameTest) {\n   EXPECT_EQ(TraceMeEncode({{\"context\", \"World\"}, {\"request_id\", 42}}),\n             \"#context=World,request_id=42#\");"