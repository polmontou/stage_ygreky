"# Description:\n#   Host-platform specific StreamExecutor support code.\n\nload(\"//tensorflow/compiler/xla:xla.bzl\", \"xla_cc_test\")\nload(\"//tensorflow/tsl/platform:rules_cc.bzl\", \"cc_library\")\nload(\"//tensorflow/compiler/xla/stream_executor:build_defs.bzl\", \"stream_executor_friends\")\n\npackage(\n    # copybara:uncomment default_applicable_licenses = [\"//tensorflow:license\"],\n    default_visibility = [\":friends\"],\n    licenses = [\"notice\"],\n)\n\npackage_group(\n    name = \"friends\",\n    packages = stream_executor_friends(),\n)\n\ncc_library(\n    name = \"host_platform_id\",\n    srcs = [\n        \"host_platform_id.cc\",\n    ],\n    hdrs = [\n        \"host_platform_id.h\",\n    ],\n    deps = [\n        \"//tensorflow/compiler/xla/stream_executor:platform\",\n    ],\n)\n\ncc_library(\n    name = \"host_platform\",\n    srcs = [\n        \"host_platform.cc\",\n    ],\n    hdrs = [\n        \"host_platform.h\",\n    ],\n    visibility = [\"//visibility:public\"],\n    deps = [\n        \":host_gpu_executor\",\n        \":host_platform_id\",\n        \"//tensorflow/compiler/xla/stream_executor:executor_cache\",\n        \"//tensorflow/compiler/xla/stream_executor:multi_platform_manager\",\n        \"//tensorflow/compiler/xla/stream_executor:stream_executor_headers\",\n        \"//tensorflow/compiler/xla/stream_executor/lib\",\n        \"//tensorflow/compiler/xla/stream_executor/platform\",\n        \"@com_google_absl//absl/base:core_headers\",\n        \"@com_google_absl//absl/memory\",\n        \"@com_google_absl//absl/strings:str_format\",\n    ],\n    alwayslink = True,  # Registers itself with the MultiPlatformManager.\n)\n\ncc_library(\n    name = \"host_stream\",\n    srcs = [\n        \"host_stream.cc\",\n    ],\n    hdrs = [\n        \"host_stream.h\",\n    ],\n    deps = [\n        \"//tensorflow/compiler/xla/stream_executor:kernel\",\n        \"//tensorflow/compiler/xla/stream_executor/lib\",\n        \"//tensorflow/tsl/platform:denormal\",\n        \"//tensorflow/tsl/platform:env\",\n        \"//tensorflow/tsl/platform:setround\",\n        \"@com_google_absl//absl/functional:any_invocable\",\n        \"@com_google_absl//absl/synchronization\",\n    ],\n)\n\ncc_library(\n    name = \"host_timer\",\n    srcs = [\n        \"host_timer.cc\",\n    ],\n    hdrs = [\n        \"host_timer.h\",\n    ],\n    deps = [\n        \"//tensorflow/compiler/xla/stream_executor:stream_executor_internal\",\n        \"//tensorflow/compiler/xla/stream_executor:timer\",\n        \"//tensorflow/compiler/xla/stream_executor/platform\",\n    ],\n)\n\n# TODO(22689637): Rename this target.\ncc_library(\n    name = \"host_gpu_executor\",\n    srcs = [\n        \"host_gpu_executor.cc\",\n    ],\n    hdrs = [\n        \"host_gpu_executor.h\",\n    ],\n    deps = [\n        \":host_platform_id\",\n        \":host_stream\",\n        \":host_timer\",\n        \"//tensorflow/compiler/xla/stream_executor\",\n        \"//tensorflow/compiler/xla/stream_executor:kernel\",\n        \"//tensorflow/compiler/xla/stream_executor:rng\",\n        \"//tensorflow/compiler/xla/stream_executor:stream_executor_internal\",\n        \"//tensorflow/compiler/xla/stream_executor:stream_executor_pimpl\",\n        \"//tensorflow/compiler/xla/stream_executor:timer\",\n        \"//tensorflow/compiler/xla/stream_executor/lib\",\n        \"//tensorflow/tsl/platform:platform_port\",\n        \"//tensorflow/tsl/platform/profile_utils:profile_utils_cpu_utils\",\n        \"@com_google_absl//absl/functional:any_invocable\",\n        \"@com_google_absl//absl/strings\",\n        \"@com_google_absl//absl/synchronization\",\n    ],\n    alwayslink = True,\n)\n\nxla_cc_test(\n    name = \"host_stream_test\",\n    srcs = [\"host_stream_test.cc\"],\n    deps = [\n        \":host_platform\",\n        \"//tensorflow/compiler/xla/stream_executor\",\n        \"//tensorflow/compiler/xla/stream_executor:multi_platform_manager\",\n        \"//tensorflow/compiler/xla/stream_executor:platform\",\n        \"//tensorflow/tsl/lib/core:status_test_util\",\n        \"//tensorflow/tsl/platform:errors\",\n        \"//tensorflow/tsl/platform:test\",\n        \"//tensorflow/tsl/platform:test_main\",\n        \"@com_google_absl//absl/synchronization\",\n    ],\n)"