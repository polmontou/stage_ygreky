"diff --git a/tensorflow/core/kernels/image/decode_image_op.cc b/tensorflow/core/kernels/image/decode_image_op.cc\nindex 91137f8343c..baa4407fd84 100644\n--- a/tensorflow/core/kernels/image/decode_image_op.cc\n+++ b/tensorflow/core/kernels/image/decode_image_op.cc\n@@ -452,12 +452,12 @@ class DecodeImageV2Op : public OpKernel {\n     // allocation til after dtype conversion is done. `gif`::Decode` supports\n     // uint8 only.\n     Tensor* output = nullptr;\n-    int buffer_size = 0;\n+    ptrdiff_t buffer_size = 0;\n     string error_string;\n     uint8* buffer = gif::Decode(\n         input.data(), input.size(),\n         [&](int num_frames, int width, int height, int channels) -> uint8* {\n-          buffer_size = num_frames * height * width * channels;\n+          buffer_size = ptrdiff_t(num_frames) * height * width * channels;\n \n           Status status;\n           // By the existing API, we support decoding GIF with `decode_jpeg` or"